<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>Babylon - Getting Started</title>
    <!-- Link to the last version of BabylonJS -->
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <!-- Link to the last version of BabylonJS loaders to enable loading filetypes such as .gltf -->
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <!-- Link to pep.js to ensure pointer events work consistently in all browsers -->
    <script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>
    <script type="text/javascript">
        function update_params() {
            console.log('document.params: ', document.params.points.value);
        };
    </script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>

<body>
    <canvas id="renderCanvas">
    </canvas>
    <div style='color: white; position: absolute; top: 0%; left: 80%; z-index: 100;'>
        <form name="params" action="" method="GET">
            Agents: <div id='agents-amount'></div><input onChange="onRangeChange()" type="range" name="points" min="1" max="100">
            <input type="button" value="Aktualizuj"  onClick="update_params();" style="width: 70px; height: 20px; border: none; border-radius: 2px; background-color: rgba(222, 224, 103, 0.619)">
        </form>
    </div>
</body>
<script src="./js/constants.js"></script>
<script>
    function onRangeChange(){document.getElementById('agents-amount').innerHTML = document.params.points.value};
    onRangeChange();
</script>
<script>
    window.addEventListener('DOMContentLoaded', function () {

        const canvas = document.getElementById('renderCanvas');
        const engine = new BABYLON.Engine(canvas, true);

        var createScene = function () {
            const scene = new BABYLON.Scene(engine);
            createCamera(scene, canvas, CAMERA_ANGLE, CAMERA_ZOOM, CAMERA_POS_X, CAMERA_POS_Y);
            createLights(scene);
            createGround(scene, GROUND_WIDTH, GROUND_HEIGHT, INIT_POS_X, INIT_POS_Z);
            agents = createAgentMeshes(scene);

            return scene;
        };
        var scene = createScene();
        start();
        engine.runRenderLoop(function () {
            scene.render();
        });
        window.addEventListener('resize', function () {
            engine.resize();
        });
    });
</script>
<script src="./js/boids.js"></script>
<script src="./js/sceneSetup.js"></script>
<script src="./js/cameraSetup.js"></script>
<script src="./js/lightSetup.js"></script>
<script src="./js/groundSetup.js"></script>

</html>